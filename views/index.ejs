<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  <meta http-equiv='X-UA-Compatible' content='ie=edge' />
  <title>Clothes</title>
  <style>
    .styledInput {
    background: 0;
    border: 0;
    width: 100%;
    overflow: visible;
    outline: 0;
    height: auto;
    user-select: none;
    }

    input[type="submit"]{
      cursor: pointer;
      user-select: none;
    }
    input[type="submit"]:active{
      position: relative;
      top: 4px;
    }
  </style>
</head>
<body>
  <nav>
    <ul>
      <li><a href='/'>Home</a></li>
      <li><a href='/clothes'>See all clothes</a></li>
          <!--dropdown for /clothes/outfits  -->
          <!--dropdown for /clothes/outfits/add  -->
      <li><a href='/clothes/add'>Clothing Add</a></li>
      <li><a href='/auth/login'>Login</a></li>
      <li><a href='/auth/register'>Register</a></li>
      <li><a href='/user'>Profile</a></li>
      <li><a href='/auth/logout'>Logout</a></li>
    </ul>
  </nav>
  <form action="/search" id='request'>
    <input type='text' name='search' placeholder='Search for something' />
    <input type='submit' value='Search' />
  </form>
  <% if(data) {%>
    <% if(data.metadata.freeTextSearches) { %>
      <h1><%= data.metadata.freeTextSearches[0]%> Search Results</h1>
    <% } %>
    <% if(data.metadata.filters) { %>
      <h1><%= data.metadata.filters[0].name%> Search Results</h1>
    <% } %>
    <div>
      <ul>
        <% data.products.map((products)=>{ %>
            <li class="productItem" id="<%= products.id%>">
            <form method="post" action="/clothes/clothes_add"> 
                <input name="name" class="styledInput" type="text" value="<%= products.name %>">

                <% if(products.brand) { %>
                <input name="brand" class="styledInput" type="text" value="<%= products.brand.name %>">
                <% } %>

                <textarea name="description" class="styledInput" readonly="readonly" type="text" value=""> <%= products.description.split('<ul>')[0] %> </textarea>  

                <input name="price" class="styledInput" type="text" value="<%= products.priceLabel %>">  

                <input name="productId" style="display: none" type="text" value="<%= products.id %>">  
                         
                <input name="brandedName" class="styledInput" type="text" value="<%= products.brandedName %>">  

                <input name="imageBest" class="styledInput" type="text" value="<%= products.image.sizes.Best.url %>" style="display:none">           

                <img src="<%= products.image.sizes.Best.url%>" title="<%= products.name %>" alt="<%= products.brandedName %>" />

                <input name="clothing_type" class="styledInput" type="text" value="<%= products.categories[0].shortName %>"> 

                <input class="styledInput" type="submit" value="Own it" />
            </form>  
            </li>
        <% })%>
      </ul>
    </div>
  <%}%>
 <!-- <script src='./src/main.js'></script>  -->
</body>
</html>